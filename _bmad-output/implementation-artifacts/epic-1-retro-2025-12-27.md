# Epic 1 Retrospective: プロジェクト基盤構築

**日付:** 2025-12-27
**ファシリテーター:** Bob (Scrum Master)
**参加者:** Alice (PO), Carlos (Tech Lead), Diana (QA Lead)

---

## Epic Summary

| 項目 | 内容 |
|------|------|
| Epic名 | プロジェクト基盤構築 |
| 目標 | 開発者が`make dev`でシステムを起動できる状態を実現 |
| ストーリー数 | 4 |
| 完了日 | 2025-12-27 |
| FRカバレッジ | FR30 |

---

## Stories Completed

| Story | タイトル | 担当 | レビュー修正 |
|-------|---------|------|-------------|
| 1.1 | モノレポ構造の初期化 | Claude Opus 4.5 | 3 MEDIUM |
| 1.2 | Backend基盤セットアップ | Claude Opus 4.5 | 2 HIGH, 3 MEDIUM, 1 LOW |
| 1.3 | Frontend基盤セットアップ | Claude Opus 4.5 | 1 HIGH, 2 MEDIUM, 1 LOW |
| 1.4 | 統合開発環境 | Claude Opus 4.5 | 2 LOW (ドキュメントのみ) |

---

## What Went Well

### 技術面
1. **Architecture.md準拠** - 定義されたパターンを忠実に実装
2. **コードレビュー品質** - Adversarial review で各ストーリーの品質を確保
3. **前方互換性設計** - Story 1.1のスクリプトが後続ストーリー未実装でも動作

### プロセス面
1. **BMAD Workflow** - create-story → dev-story → code-review → merge の流れが確立
2. **ドキュメント連携** - Story fileに完了ノート、File List、Change Logを記録
3. **Sprint Status追跡** - sprint-status.yamlでステータス管理

### 成果物
- `frontend/` + `backend/` モノレポ構造
- FastAPI 0.127.1 + Next.js 16.1.1 + React 19.2.3
- `make dev` でワンコマンド開発環境起動
- CORS設定済みのFrontend→Backend通信

---

## What We Learned

### Story 1.1
- `scripts/setup.sh` と `scripts/dev.sh` に前方互換性チェックを追加する重要性
- `.gitignore` で planning artifacts を意図的にトラッキング可能

### Story 1.2
- CORS設定は明示的に（`allow_methods`, `allow_headers`）
- Pydantic `field_validator` で invalid input fallback
- `lifespan` context manager でアプリ起動時処理を管理
- `lru_cache` パターンでテスト容易性確保

### Story 1.3
- Tailwind CSS v4 は PostCSS 経由で設定
- React 19.2.3 と Next.js 16.1.1 の組み合わせ
- `npm run lint` スクリプトは `next lint` ではなく `eslint` 直接実行

### Story 1.4
- `make -j2` で並列プロセス起動、SIGINT で両方終了
- Makefile の現在実装 vs Architecture.md 例の差異を文書化

---

## Areas for Improvement

1. **テスト自動化** - Story 1.4の統合テストは手動実行。CI/CD整備時に自動化検討
2. **レビュー効率** - Adversarial review は効果的だが時間がかかる。重要度に応じた調整
3. **ポート競合対処** - 開発中にポート3000/8000が占有されている場合の対処手順を文書化

---

## Technical Debt

| 項目 | 優先度 | 対応時期 |
|------|-------|---------|
| CI/CD パイプライン未構築 | LOW | Epic 5 で対応予定 |
| E2E テスト未実装 | MEDIUM | Epic 2 完了後に検討 |

---

## Action Items for Next Epic

### Epic 2: リアルタイム音声対話 への準備

1. **外部依存のセットアップ**
   - ReazonSpeech NeMo v2 モデルのダウンロード
   - Style-BERT-VITS2 のインストールと設定
   - LLM プロバイダー（Ollama/OpenAI/Groq）の接続確認

2. **技術調査**
   - `@ricky0123/vad-web` ライブラリの動作確認
   - WebSocket イベント契約の詳細設計確認
   - Web Audio API での音声再生パターン

3. **開発環境**
   - GPU 環境の確認（STT/TTS 処理用）
   - 必要なモデルファイルのダウンロード先確認

---

## Next Steps

1. ✅ sprint-status.yaml 更新完了（Epic 1: done）
2. ✅ レトロスペクティブドキュメント作成
3. ⏳ Epic 2 Story 2.1 (WebSocket基盤) の作成・実装開始

---

## Metrics

| メトリクス | 値 |
|-----------|-----|
| 総ストーリー数 | 4 |
| 総レビュー修正数 | 15 |
| HIGH修正 | 3 |
| MEDIUM修正 | 8 |
| LOW修正 | 4 |
| 新規ファイル数 | ~25 |
| テスト数 | 4 (Backend pytest) |

---

*Generated by BMAD Retrospective Workflow*
